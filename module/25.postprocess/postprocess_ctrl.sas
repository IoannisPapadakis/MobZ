* Mobility Zones (MobZ);* Execute control program to run selected modules; options  mlogic symbolgen spool;* Modules, set to 1 to run, otherwise 0;                   /***********************************POSTPROCESSING MODULES***********************************/            /***************************************MAPPING MODULES            ***************************************/            %let run_mapjtw1990 = 0 ; %let run_mapjtw2000 = 0 ; %let run_mapjtw2009 = 0 ;%let run_maplodes =  0;            /* DIVERGENCE COMPARES THE CLUSTER dataset to JTW1990 */            %let run_divergencejtw1990= 0;%let run_divergencejtw2000 = 0 ;%let run_divergencejtw2009 =0;%let run_divergencelodes = 0;                        %let run_comparejtw1990 =0 ;%let run_divergenceregjtw1990 = 0 ;%let run_map_inset = 0;             /****** CONTIGUITY (not used anymore)****/            %let run_contjtw1990 = 0;%let run_contlodes = 1 ;            /* THIS  IS A SINGLE RUN - USED IN LOTS OF OTHER MODULES */                %let run_clusternaming = 0 ;*LODES ;* job type;%let jt=00;* year ; %let year=2008;* Cluster threshold;%let cutoff=0.9418 ; /*national cutoff for their way*/*%let cutoff=0.98 ; * Paths;%let dirprog=.;%let dirdata=.;libname OUTPUTS "&dirdata./outputs";libname LODES "&dirdata./lodes" access=readonly;libname GEO "&dirdata./geo" ;options sasautos="&dirprog./macros" mautosource nocenter ps=1000;%global tstamp;%let t=%sysfunc(today());%let tt=%sysfunc(time());%let dstamp=%trim(%sysfunc(year(&t.),z4.))%trim(%sysfunc(month(&t.),z2.))%trim(%sysfunc(day(&t.),z2.));%let tstamp=&dstamp._%trim(%sysfunc(hour(&tt.),z2.))%trim(%sysfunc(minute(&tt.),z2.))%trim(%sysfunc(second(&tt.),z2.));/* Overall Macro */%macro runall;* Modules;%macro runmod(val,modname);%put module &modname.;%if (&val.=1) %then %do;proc printto    log="&dirprog./loglst/module_&modname..log" new    print="&dirprog./loglst/module_&modname..lst" new;run;%include "&dirprog./modules/25.postprocess/module_&modname..sas";   proc printto    log="&dirprog./ctrl_mobz.log" new    print="&dirprog./ctrl_mobz.lst" new;run;%end;%mend runmod;* Create one for each module;%runmod(&run_contjtw1990.,contjtw1990) ;%runmod(&run_contlodes.,contlodes) ;%runmod(&run_comparejtw1990.,comparejtw1990) ;%runmod(&run_mapjtw1990.,mapjtw1990) ;%runmod(&run_mapjtw2000.,mapjtw2000) ; %runmod(&run_mapjtw2009.,mapjtw2009) ;%runmod(&run_maplodes.,maplodes) ;%runmod(&run_divergencejtw1990.,divergencejtw1990);%runmod(&run_divergencejtw2000.,divergencejtw2000);%runmod(&run_divergencejtw2009.,divergencejtw2009);%runmod(&run_divergencelodes.,divergencelodes);%runmod(&run_divergenceregjtw1990.,divergenceregjtw1990) ;%runmod(&run_clusternaming., clusternaming) ;%runmod(&run_map_inset.,map_inset) ;%mend runall;* run all;%runall;
